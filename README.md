# Kafka è¯¦ç»†ä½¿ç”¨ç¤ºä¾‹

è¿™æ˜¯ä¸€ä¸ªå®Œæ•´çš„Java Kafkaä½¿ç”¨ç¤ºä¾‹é¡¹ç›®ï¼Œå±•ç¤ºäº†Kafkaçš„å„ç§åŠŸèƒ½å’Œæœ€ä½³å®è·µã€‚é¡¹ç›®é‡‡ç”¨åˆ†å±‚æ¶æ„è®¾è®¡ï¼Œæ”¯æŒäº¤äº’å¼å’Œå‘½ä»¤è¡Œä¸¤ç§ä½¿ç”¨æ¨¡å¼ã€‚

## é¡¹ç›®ç»“æ„

```
kafka/
â”œâ”€â”€ pom.xml                                    # Mavené…ç½®æ–‡ä»¶
â”œâ”€â”€ README.md                                  # é¡¹ç›®è¯´æ˜æ–‡æ¡£
â”œâ”€â”€ docker-compose.yml                         # Docker Composeé…ç½®
â”œâ”€â”€ src/main/java/com/example/kafka/
â”‚   â”œâ”€â”€ ApplicationLauncher.java               # åº”ç”¨å¯åŠ¨å™¨ï¼ˆä¸»å…¥å£ï¼‰
â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â””â”€â”€ KafkaConfig.java                   # Kafkaé…ç½®ç±»
â”‚   â”œâ”€â”€ model/
â”‚   â”‚   â”œâ”€â”€ User.java                          # ç”¨æˆ·å®ä½“ç±»
â”‚   â”‚   â””â”€â”€ Order.java                         # è®¢å•å®ä½“ç±»
â”‚   â”œâ”€â”€ util/
â”‚   â”‚   â”œâ”€â”€ JsonUtil.java                      # JSONå·¥å…·ç±»
â”‚   â”‚   â”œâ”€â”€ InputManager.java                  # è¾“å…¥ç®¡ç†å™¨
â”‚   â”‚   â””â”€â”€ StreamsConfigHelper.java           # æµå¤„ç†é…ç½®åŠ©æ‰‹
â”‚   â”œâ”€â”€ producer/
â”‚   â”‚   â”œâ”€â”€ SimpleProducer.java                # ç®€å•ç”Ÿäº§è€…ç¤ºä¾‹
â”‚   â”‚   â””â”€â”€ AdvancedProducer.java              # é«˜çº§ç”Ÿäº§è€…ç¤ºä¾‹
â”‚   â”œâ”€â”€ consumer/
â”‚   â”‚   â”œâ”€â”€ SimpleConsumer.java                # ç®€å•æ¶ˆè´¹è€…ç¤ºä¾‹
â”‚   â”‚   â”œâ”€â”€ AdvancedConsumer.java              # é«˜çº§æ¶ˆè´¹è€…ç¤ºä¾‹
â”‚   â”‚   â””â”€â”€ ImprovedMultiThreadConsumer.java   # æ”¹è¿›çš„å¤šçº¿ç¨‹æ¶ˆè´¹è€…
â”‚   â”œâ”€â”€ streams/
â”‚   â”‚   â”œâ”€â”€ WordCountStream.java               # å•è¯è®¡æ•°æµå¤„ç†
â”‚   â”‚   â”œâ”€â”€ OrderProcessingStream.java         # è®¢å•å¤„ç†æµ
â”‚   â”‚   â””â”€â”€ AdvancedStreamProcessor.java      # é«˜çº§æµå¤„ç†å™¨
â”‚   â”œâ”€â”€ menu/
â”‚   â”‚   â””â”€â”€ MenuManager.java                   # èœå•ç®¡ç†å™¨
â”‚   â””â”€â”€ manager/
â”‚       â”œâ”€â”€ ProducerManager.java               # ç”Ÿäº§è€…ç®¡ç†å™¨
â”‚       â”œâ”€â”€ ConsumerManager.java               # æ¶ˆè´¹è€…ç®¡ç†å™¨
â”‚       â””â”€â”€ StreamProcessorManager.java        # æµå¤„ç†å™¨ç®¡ç†å™¨
â”œâ”€â”€ src/main/resources/
â”‚   â””â”€â”€ logback.xml                            # æ—¥å¿—é…ç½®
â””â”€â”€ data/
    â””â”€â”€ kafka-data/                            # Kafkaæ•°æ®æŒä¹…åŒ–ç›®å½•
```

## åŠŸèƒ½ç‰¹æ€§

### ğŸ—ï¸ æ¶æ„ç‰¹æ€§
- **åˆ†å±‚æ¶æ„**: é‡‡ç”¨ç®¡ç†å™¨æ¨¡å¼ï¼ŒèŒè´£åˆ†ç¦»æ¸…æ™°
- **äº¤äº’å¼ç•Œé¢**: å‹å¥½çš„èœå•ç³»ç»Ÿï¼Œæ”¯æŒç”¨æˆ·äº¤äº’
- **å‘½ä»¤è¡Œæ”¯æŒ**: æ”¯æŒè„šæœ¬åŒ–å’Œè‡ªåŠ¨åŒ–è¿è¡Œ
- **æ¨¡å—åŒ–è®¾è®¡**: å„åŠŸèƒ½æ¨¡å—ç‹¬ç«‹ï¼Œä¾¿äºæ‰©å±•å’Œç»´æŠ¤

### 1. ç”Ÿäº§è€…åŠŸèƒ½
- **ç®€å•ç”Ÿäº§è€…**: åŸºæœ¬çš„æ¶ˆæ¯å‘é€åŠŸèƒ½
- **é«˜çº§ç”Ÿäº§è€…**: åˆ†åŒºã€å‹ç¼©ã€äº‹åŠ¡ç­‰é«˜çº§åŠŸèƒ½
- **äº¤äº’å¼ç”Ÿäº§è€…**: æ”¯æŒå®æ—¶è¾“å…¥å’Œå‘é€æ¶ˆæ¯
- **æ‰¹é‡å‘é€**: é«˜æ•ˆçš„æ‰¹é‡æ¶ˆæ¯å‘é€
- **å¼‚æ­¥å‘é€**: éé˜»å¡çš„æ¶ˆæ¯å‘é€

### 2. æ¶ˆè´¹è€…åŠŸèƒ½
- **ç®€å•æ¶ˆè´¹è€…**: åŸºæœ¬çš„æ¶ˆæ¯æ¶ˆè´¹åŠŸèƒ½
- **é«˜çº§æ¶ˆè´¹è€…**: å¤šçº¿ç¨‹æ¶ˆè´¹ã€æ‰‹åŠ¨æäº¤åç§»é‡
- **å¤šçº¿ç¨‹æ¶ˆè´¹è€…**: æ”¹è¿›çš„å¤šçº¿ç¨‹æ¶ˆè´¹å®ç°
- **æ‰¹é‡æ¶ˆè´¹**: é«˜æ•ˆçš„æ‰¹é‡æ¶ˆæ¯å¤„ç†
- **åˆ†åŒºæ¶ˆè´¹**: æŒ‡å®šåˆ†åŒºæ¶ˆè´¹æ¶ˆæ¯

### 3. æµå¤„ç†åŠŸèƒ½
- **å•è¯è®¡æ•°**: ç»å…¸çš„æµå¤„ç†ç¤ºä¾‹
- **è®¢å•å¤„ç†**: å¤æ‚çš„ä¸šåŠ¡æµå¤„ç†
- **é«˜çº§æµå¤„ç†**: åŒ…å«çª—å£æ“ä½œã€æµè¿æ¥ç­‰é«˜çº§åŠŸèƒ½
- **çŠ¶æ€ç®¡ç†**: æ”¯æŒæµå¤„ç†çŠ¶æ€å­˜å‚¨

### 4. ç®¡ç†åŠŸèƒ½
- **èœå•ç®¡ç†**: ç»Ÿä¸€çš„ç”¨æˆ·ç•Œé¢ç®¡ç†
- **ç”Ÿäº§è€…ç®¡ç†**: ç»Ÿä¸€çš„ç”Ÿäº§è€…æ“ä½œç®¡ç†
- **æ¶ˆè´¹è€…ç®¡ç†**: ç»Ÿä¸€çš„æ¶ˆè´¹è€…æ“ä½œç®¡ç†
- **æµå¤„ç†å™¨ç®¡ç†**: ç»Ÿä¸€çš„æµå¤„ç†æ“ä½œç®¡ç†

## ç¯å¢ƒè¦æ±‚

- Java 11+
- Maven 3.6+
- Apache Kafka 3.6+ (ä½¿ç”¨KRaftæ¨¡å¼ï¼Œæ— éœ€Zookeeper)
- Docker (å¯é€‰ï¼Œç”¨äºå¿«é€Ÿå¯åŠ¨Kafkaç¯å¢ƒ)

## å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…å’Œå¯åŠ¨Kafka

#### æ–¹å¼ä¸€ï¼šä½¿ç”¨Docker (æ¨è)
```bash
# å¯åŠ¨Kafka (KRaftæ¨¡å¼ï¼Œæ— éœ€Zookeeper)
docker-compose up -d

# æˆ–ä½¿ç”¨è„šæœ¬
./scripts/start-kafka.sh
```

**æ–°é…ç½®ç‰¹ç‚¹ï¼š**
- ä½¿ç”¨ `apache/kafka:3.9.0` é•œåƒ
- å®Œå…¨KRaftæ¨¡å¼ï¼Œæ— éœ€Zookeeper
- è‡ªåŠ¨åˆ›å»ºä¸»é¢˜åŠŸèƒ½
- æ•°æ®æŒä¹…åŒ–åˆ° `./data/kafka-data/`
- KafkaæœåŠ¡å™¨: localhost:29092
- Kafka UI: http://localhost:28081

#### æ–¹å¼äºŒï¼šæœ¬åœ°å®‰è£…
```bash
# ä¸‹è½½Kafka 3.6.0
wget https://downloads.apache.org/kafka/3.6.0/kafka_2.13-3.6.0.tgz
tar -xzf kafka_2.13-3.6.0.tgz
cd kafka_2.13-3.6.0

# æ ¼å¼åŒ–å­˜å‚¨ç›®å½• (ä»…é¦–æ¬¡è¿è¡Œ)
bin/kafka-storage.sh format -t MkU3OEVBNTcwNTJENDM2Qk -c config/kraft/server.properties

# å¯åŠ¨Kafka (KRaftæ¨¡å¼)
bin/kafka-server-start.sh config/kraft/server.properties
```

**æ³¨æ„**: æ–°ç‰ˆæœ¬Kafkaä½¿ç”¨KRaftæ¨¡å¼ï¼Œä¸å†éœ€è¦Zookeeperï¼

### å…³äºKRaftæ¨¡å¼

KRaft (Kafka Raft) æ˜¯Apache Kafkaçš„æ–°å…ƒæ•°æ®ç®¡ç†æ–¹å¼ï¼Œä»Kafka 2.8.0å¼€å§‹å¼•å…¥ï¼Œåœ¨Kafka 3.0+ç‰ˆæœ¬ä¸­æˆä¸ºæ¨èæ¨¡å¼ã€‚

#### KRaftæ¨¡å¼çš„ä¼˜åŠ¿ï¼š
- **ç®€åŒ–æ¶æ„**: ä¸å†éœ€è¦Zookeeperï¼Œå‡å°‘ç»„ä»¶ä¾èµ–
- **æ›´å¥½çš„æ€§èƒ½**: å…ƒæ•°æ®æ“ä½œæ›´å¿«ï¼Œå¯åŠ¨æ—¶é—´æ›´çŸ­
- **ç®€åŒ–è¿ç»´**: å‡å°‘ä¸€ä¸ªéœ€è¦ç»´æŠ¤çš„ç»„ä»¶
- **æ›´å¥½çš„æ‰©å±•æ€§**: æ”¯æŒæ›´å¤§çš„é›†ç¾¤è§„æ¨¡

#### ä¸»è¦å˜åŒ–ï¼š
- ä½¿ç”¨Raftåè®®è¿›è¡Œå…ƒæ•°æ®ç®¡ç†
- æ§åˆ¶å™¨èŠ‚ç‚¹è´Ÿè´£å…ƒæ•°æ®ç®¡ç†
- ä¸å†éœ€è¦Zookeeperè¿æ¥é…ç½®
- ä½¿ç”¨`kafka-storage.sh`æ ¼å¼åŒ–å­˜å‚¨ç›®å½•

### 2. ç¼–è¯‘é¡¹ç›®

```bash
mvn clean compile
```

### 3. è¿è¡Œç¤ºä¾‹

#### æ–¹å¼ä¸€ï¼šäº¤äº’å¼æ¨¡å¼ï¼ˆæ¨èï¼‰
```bash
# å¯åŠ¨äº¤äº’å¼èœå•
mvn exec:java -Dexec.mainClass="com.example.kafka.ApplicationLauncher"
```

#### æ–¹å¼äºŒï¼šå‘½ä»¤è¡Œæ¨¡å¼
```bash
# ç”Ÿäº§è€…æ¨¡å¼
mvn exec:java -Dexec.mainClass="com.example.kafka.ApplicationLauncher" -Dexec.args="producer simple"
mvn exec:java -Dexec.mainClass="com.example.kafka.ApplicationLauncher" -Dexec.args="producer advanced"
mvn exec:java -Dexec.mainClass="com.example.kafka.ApplicationLauncher" -Dexec.args="producer interactive"

# æ¶ˆè´¹è€…æ¨¡å¼
mvn exec:java -Dexec.mainClass="com.example.kafka.ApplicationLauncher" -Dexec.args="consumer simple"
mvn exec:java -Dexec.mainClass="com.example.kafka.ApplicationLauncher" -Dexec.args="consumer advanced"

# æµå¤„ç†æ¨¡å¼
mvn exec:java -Dexec.mainClass="com.example.kafka.ApplicationLauncher" -Dexec.args="stream wordcount"
mvn exec:java -Dexec.mainClass="com.example.kafka.ApplicationLauncher" -Dexec.args="stream order"
mvn exec:java -Dexec.mainClass="com.example.kafka.ApplicationLauncher" -Dexec.args="stream advanced"
```

#### æ–¹å¼ä¸‰ï¼šç›´æ¥è¿è¡Œç¼–è¯‘åçš„ç±»
```bash
# äº¤äº’å¼æ¨¡å¼
java -cp target/classes com.example.kafka.ApplicationLauncher

# å‘½ä»¤è¡Œæ¨¡å¼
java -cp target/classes com.example.kafka.ApplicationLauncher producer simple
java -cp target/classes com.example.kafka.ApplicationLauncher consumer advanced
java -cp target/classes com.example.kafka.ApplicationLauncher stream wordcount
```

## è¯¦ç»†ä½¿ç”¨è¯´æ˜

### ğŸ¯ äº¤äº’å¼æ¨¡å¼ä½¿ç”¨

å¯åŠ¨äº¤äº’å¼æ¨¡å¼åï¼Œæ‚¨å°†çœ‹åˆ°ä»¥ä¸‹èœå•ï¼š

```
=== Kafka è¯¦ç»†ä½¿ç”¨ç¤ºä¾‹ ===
1. è¿è¡Œç®€å•ç”Ÿäº§è€…
2. è¿è¡Œç®€å•æ¶ˆè´¹è€…
3. è¿è¡Œé«˜çº§ç”Ÿäº§è€…
4. è¿è¡Œé«˜çº§æ¶ˆè´¹è€…
5. è¿è¡Œå¤šçº¿ç¨‹æ¶ˆè´¹è€…
6. è¿è¡Œæµå¤„ç†å™¨
7. é€€å‡º
==========================
```

### ç”Ÿäº§è€…ä½¿ç”¨

#### é€šè¿‡ç®¡ç†å™¨ä½¿ç”¨
```java
// ç®€å•ç”Ÿäº§è€…
ProducerManager producerManager = new ProducerManager();
producerManager.runSimpleProducer();

// é«˜çº§ç”Ÿäº§è€…
producerManager.runAdvancedProducer();

// äº¤äº’å¼ç”Ÿäº§è€…
producerManager.runInteractiveProducer();
```

#### ç›´æ¥ä½¿ç”¨ç”Ÿäº§è€…ç±»
```java
// ç®€å•ç”Ÿäº§è€…
SimpleProducer producer = new SimpleProducer();
producer.sendMessage("test-topic", "key", "Hello Kafka!");
producer.close();

// é«˜çº§ç”Ÿäº§è€…
AdvancedProducer producer = new AdvancedProducer();
producer.sendMessageWithTimestamp("test-topic", "key", "message");
producer.close();
```

### æ¶ˆè´¹è€…ä½¿ç”¨

#### é€šè¿‡ç®¡ç†å™¨ä½¿ç”¨
```java
// ç®€å•æ¶ˆè´¹è€…
ConsumerManager consumerManager = new ConsumerManager();
consumerManager.runSimpleConsumer();

// é«˜çº§æ¶ˆè´¹è€…
consumerManager.runAdvancedConsumer();

// å¤šçº¿ç¨‹æ¶ˆè´¹è€…
consumerManager.runMultiThreadConsumer("test-topic", 3);
```

#### ç›´æ¥ä½¿ç”¨æ¶ˆè´¹è€…ç±»
```java
// ç®€å•æ¶ˆè´¹è€…
SimpleConsumer consumer = new SimpleConsumer();
consumer.consumeMessages("test-topic");
consumer.close();

// é«˜çº§æ¶ˆè´¹è€…
AdvancedConsumer consumer = new AdvancedConsumer();
consumer.consumeMessagesMultiThread("test-topic");
consumer.close();
```

### æµå¤„ç†ä½¿ç”¨

#### é€šè¿‡ç®¡ç†å™¨ä½¿ç”¨
```java
// æµå¤„ç†å™¨ç®¡ç†å™¨
StreamProcessorManager streamManager = new StreamProcessorManager();

// å•è¯è®¡æ•°æµ
streamManager.runWordCountStream();

// è®¢å•å¤„ç†æµ
streamManager.runOrderProcessingStream();

// é«˜çº§æµå¤„ç†å™¨
streamManager.runAdvancedStreamProcessor();
```

#### ç›´æ¥ä½¿ç”¨æµå¤„ç†å™¨ç±»
```java
// å•è¯è®¡æ•°æµ
WordCountStream wordCountStream = new WordCountStream();
wordCountStream.start();

// è®¢å•å¤„ç†æµ
OrderProcessingStream orderStream = new OrderProcessingStream();
orderStream.start();
```

## é…ç½®è¯´æ˜

### ç”Ÿäº§è€…é…ç½®
- `acks`: ç¡®è®¤æœºåˆ¶ (all, 1, 0)
- `retries`: é‡è¯•æ¬¡æ•°
- `batch.size`: æ‰¹é‡å¤§å°
- `linger.ms`: ç­‰å¾…æ—¶é—´
- `compression.type`: å‹ç¼©ç±»å‹

### æ¶ˆè´¹è€…é…ç½®
- `group.id`: æ¶ˆè´¹è€…ç»„ID
- `auto.offset.reset`: åç§»é‡é‡ç½®ç­–ç•¥
- `enable.auto.commit`: è‡ªåŠ¨æäº¤åç§»é‡
- `max.poll.records`: æ¯æ¬¡æ‹‰å–çš„æœ€å¤§è®°å½•æ•°

### æµå¤„ç†é…ç½®
- `application.id`: åº”ç”¨ID
- `bootstrap.servers`: KafkaæœåŠ¡å™¨åœ°å€
- `default.key.serde`: é»˜è®¤é”®åºåˆ—åŒ–å™¨
- `default.value.serde`: é»˜è®¤å€¼åºåˆ—åŒ–å™¨

## æ¶æ„è®¾è®¡

### ğŸ—ï¸ åˆ†å±‚æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           åº”ç”¨å±‚ (Application)        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ApplicationLauncher                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           ç®¡ç†å±‚ (Manager)           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  MenuManager                        â”‚
â”‚  ProducerManager                    â”‚
â”‚  ConsumerManager                    â”‚
â”‚  StreamProcessorManager             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           ä¸šåŠ¡å±‚ (Business)          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Producer (Simple/Advanced)         â”‚
â”‚  Consumer (Simple/Advanced)         â”‚
â”‚  StreamProcessor (WordCount/Order) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           é…ç½®å±‚ (Config)            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  KafkaConfig                       â”‚
â”‚  JsonUtil                          â”‚
â”‚  InputManager                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ¯ è®¾è®¡æ¨¡å¼

1. **ç®¡ç†å™¨æ¨¡å¼ (Manager Pattern)**
   - `ProducerManager` - ç®¡ç†ç”Ÿäº§è€…ç›¸å…³æ“ä½œ
   - `ConsumerManager` - ç®¡ç†æ¶ˆè´¹è€…ç›¸å…³æ“ä½œ
   - `StreamProcessorManager` - ç®¡ç†æµå¤„ç†å™¨ç›¸å…³æ“ä½œ

2. **å•ä¸€èŒè´£åŸåˆ™ (Single Responsibility Principle)**
   - æ¯ä¸ªç±»åªè´Ÿè´£ä¸€ä¸ªç‰¹å®šçš„åŠŸèƒ½
   - èœå•ç®¡ç†ã€ç”Ÿäº§è€…ç®¡ç†ã€æ¶ˆè´¹è€…ç®¡ç†åˆ†ç¦»

3. **ä¾èµ–æ³¨å…¥ (Dependency Injection)**
   - ä¸»åº”ç”¨ç±»é€šè¿‡æ„é€ å‡½æ•°æ³¨å…¥ç®¡ç†å™¨å®ä¾‹
   - ä¾¿äºæµ‹è¯•å’Œç»´æŠ¤

## æœ€ä½³å®è·µ

### 1. æ¶æ„æœ€ä½³å®è·µ
- ä½¿ç”¨ç®¡ç†å™¨æ¨¡å¼ç»Ÿä¸€ç®¡ç†ç›¸å…³åŠŸèƒ½
- ä¿æŒå•ä¸€èŒè´£åŸåˆ™ï¼Œæ¯ä¸ªç±»åªè´Ÿè´£ä¸€ä¸ªåŠŸèƒ½
- ä½¿ç”¨ä¾èµ–æ³¨å…¥æé«˜ä»£ç çš„å¯æµ‹è¯•æ€§
- åˆç†ä½¿ç”¨æ—¥å¿—è®°å½•ï¼Œä¾¿äºé—®é¢˜æ’æŸ¥

### 2. ç”Ÿäº§è€…æœ€ä½³å®è·µ
- ä½¿ç”¨æ‰¹é‡å‘é€æé«˜ååé‡
- é…ç½®é€‚å½“çš„é‡è¯•æœºåˆ¶
- ä½¿ç”¨å¹‚ç­‰æ€§ä¿è¯æ¶ˆæ¯ä¸é‡å¤
- åˆç†è®¾ç½®ç¼“å†²åŒºå¤§å°
- ä½¿ç”¨äº¤äº’å¼ç”Ÿäº§è€…è¿›è¡Œå®æ—¶æµ‹è¯•

### 3. æ¶ˆè´¹è€…æœ€ä½³å®è·µ
- ä½¿ç”¨æ¶ˆè´¹è€…ç»„å®ç°è´Ÿè½½å‡è¡¡
- æ‰‹åŠ¨æäº¤åç§»é‡ä¿è¯æ¶ˆæ¯å¤„ç†
- åˆç†è®¾ç½®æ‹‰å–è¶…æ—¶æ—¶é—´
- å¤„ç†æ¶ˆè´¹å¼‚å¸¸å’Œé‡è¯•
- ä½¿ç”¨å¤šçº¿ç¨‹æ¶ˆè´¹è€…æé«˜å¤„ç†èƒ½åŠ›

### 4. æµå¤„ç†æœ€ä½³å®è·µ
- åˆç†è®¾ç½®çª—å£å¤§å°
- ä½¿ç”¨çŠ¶æ€å­˜å‚¨ç»´æŠ¤çŠ¶æ€
- å¤„ç†æµå¤„ç†å¼‚å¸¸
- ç›‘æ§æµå¤„ç†æ€§èƒ½
- ä½¿ç”¨ç®¡ç†å™¨ç»Ÿä¸€ç®¡ç†æµå¤„ç†å™¨

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **è¿æ¥å¤±è´¥**
   - æ£€æŸ¥KafkaæœåŠ¡å™¨æ˜¯å¦å¯åŠ¨
   - éªŒè¯bootstrap.serversé…ç½®
   - æ£€æŸ¥ç½‘ç»œè¿æ¥

2. **æ¶ˆæ¯å‘é€å¤±è´¥**
   - æ£€æŸ¥ä¸»é¢˜æ˜¯å¦å­˜åœ¨
   - éªŒè¯åºåˆ—åŒ–å™¨é…ç½®
   - æ£€æŸ¥æƒé™è®¾ç½®

3. **æ¶ˆè´¹ä¸åˆ°æ¶ˆæ¯**
   - æ£€æŸ¥æ¶ˆè´¹è€…ç»„é…ç½®
   - éªŒè¯åç§»é‡è®¾ç½®
   - æ£€æŸ¥ä¸»é¢˜åˆ†åŒº

### æ—¥å¿—é…ç½®

é¡¹ç›®ä½¿ç”¨Logbackä½œä¸ºæ—¥å¿—æ¡†æ¶ï¼Œå¯ä»¥é€šè¿‡ä¿®æ”¹`src/main/resources/logback.xml`æ¥è°ƒæ•´æ—¥å¿—çº§åˆ«å’Œè¾“å‡ºæ ¼å¼ã€‚

## KRaftæ¨¡å¼è¯´æ˜

æœ¬é¡¹ç›®ä½¿ç”¨Kafka 3.6.0çš„KRaftæ¨¡å¼ï¼Œè¿™æ˜¯Apache Kafkaçš„æ–°æ¶æ„ï¼Œä¸å†ä¾èµ–Zookeeperã€‚

### KRaftæ¨¡å¼çš„ä¼˜åŠ¿ï¼š
- **ç®€åŒ–æ¶æ„**: ä¸å†éœ€è¦Zookeeperï¼Œå‡å°‘ç»„ä»¶ä¾èµ–
- **æ›´å¥½æ€§èƒ½**: å…ƒæ•°æ®æ“ä½œæ›´å¿«ï¼Œå¯åŠ¨æ—¶é—´æ›´çŸ­
- **ç®€åŒ–è¿ç»´**: å‡å°‘ä¸€ä¸ªéœ€è¦ç»´æŠ¤çš„ç»„ä»¶
- **æ›´å¥½æ‰©å±•æ€§**: æ”¯æŒæ›´å¤§çš„é›†ç¾¤è§„æ¨¡

### è¯¦ç»†å¯¹æ¯”æ–‡æ¡£ï¼š
æŸ¥çœ‹ [docs/kraft-vs-zookeeper.md](docs/kraft-vs-zookeeper.md) äº†è§£KRaftä¸Zookeeperæ¨¡å¼çš„è¯¦ç»†å¯¹æ¯”ã€‚

## æ–°ç‰¹æ€§

### ğŸš€ äº¤äº’å¼ç•Œé¢
- **å‹å¥½èœå•**: ç›´è§‚çš„èœå•ç³»ç»Ÿï¼Œæ”¯æŒæ•°å­—é€‰æ‹©
- **å®æ—¶äº¤äº’**: æ”¯æŒå®æ—¶è¾“å…¥å’Œå‘é€æ¶ˆæ¯
- **é”™è¯¯å¤„ç†**: å®Œå–„çš„è¾“å…¥éªŒè¯å’Œé”™è¯¯æç¤º
- **ç”¨æˆ·å‹å¥½**: æ¸…æ™°çš„æ“ä½œæç¤ºå’ŒçŠ¶æ€åé¦ˆ

### ğŸ›ï¸ ç®¡ç†å™¨æ¨¡å¼
- **ç»Ÿä¸€ç®¡ç†**: é€šè¿‡ç®¡ç†å™¨ç±»ç»Ÿä¸€ç®¡ç†ç›¸å…³åŠŸèƒ½
- **èŒè´£åˆ†ç¦»**: æ¯ä¸ªç®¡ç†å™¨è´Ÿè´£ç‰¹å®šçš„åŠŸèƒ½æ¨¡å—
- **æ˜“äºæ‰©å±•**: æ–°å¢åŠŸèƒ½åªéœ€æ·»åŠ å¯¹åº”çš„ç®¡ç†å™¨æ–¹æ³•
- **ä»£ç å¤ç”¨**: é¿å…é‡å¤ä»£ç ï¼Œæé«˜ç»´æŠ¤æ€§

### ğŸ”§ å‘½ä»¤è¡Œæ”¯æŒ
- **è„šæœ¬åŒ–è¿è¡Œ**: æ”¯æŒå‘½ä»¤è¡Œå‚æ•°ï¼Œä¾¿äºè‡ªåŠ¨åŒ–
- **çµæ´»é…ç½®**: æ”¯æŒä¸åŒçš„è¿è¡Œæ¨¡å¼å’Œå‚æ•°
- **æ‰¹é‡æ“ä½œ**: æ”¯æŒæ‰¹é‡è¿è¡Œå’Œæµ‹è¯•
- **CI/CDé›†æˆ**: ä¾¿äºé›†æˆåˆ°æŒç»­é›†æˆæµç¨‹

## æ‰©å±•åŠŸèƒ½

### 1. æ·»åŠ æ–°çš„ç®¡ç†å™¨
```java
// 1. åˆ›å»ºæ–°çš„ç®¡ç†å™¨ç±»
public class NewFeatureManager {
    public void runNewFeature() {
        // å®ç°æ–°åŠŸèƒ½
    }
}

// 2. åœ¨ApplicationLauncherä¸­æ³¨å…¥
private final NewFeatureManager newFeatureManager;

// 3. åœ¨èœå•ä¸­æ·»åŠ æ–°é€‰é¡¹
// 4. åœ¨switchè¯­å¥ä¸­æ·»åŠ æ–°çš„case
```

### 2. æ·»åŠ æ–°çš„æ¶ˆæ¯ç±»å‹
- åˆ›å»ºæ–°çš„å®ä½“ç±»
- æ·»åŠ ç›¸åº”çš„åºåˆ—åŒ–å™¨
- æ›´æ–°ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…
- åœ¨ç®¡ç†å™¨ä¸­æ·»åŠ æ–°çš„æ–¹æ³•

### 3. æ·»åŠ æ–°çš„æµå¤„ç†é€»è¾‘
- åˆ›å»ºæ–°çš„æµå¤„ç†ç±»
- å®ç°ä¸šåŠ¡é€»è¾‘
- é…ç½®è¾“å…¥è¾“å‡ºä¸»é¢˜
- åœ¨StreamProcessorManagerä¸­æ·»åŠ æ–°æ–¹æ³•

### 4. ç›‘æ§å’ŒæŒ‡æ ‡
- é›†æˆJMXç›‘æ§
- æ·»åŠ è‡ªå®šä¹‰æŒ‡æ ‡
- ä½¿ç”¨Kafkaç›‘æ§å·¥å…·
- åœ¨ç®¡ç†å™¨ä¸­æ·»åŠ ç›‘æ§åŠŸèƒ½

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨MITè®¸å¯è¯ï¼Œè¯¦è§LICENSEæ–‡ä»¶ã€‚

## è´¡çŒ®

æ¬¢è¿æäº¤Issueå’ŒPull Requestæ¥æ”¹è¿›è¿™ä¸ªé¡¹ç›®ã€‚

## å¿«é€Ÿå¼€å§‹

### ğŸš€ ä¸€é”®å¯åŠ¨ï¼ˆæ¨èï¼‰

1. **å¯åŠ¨Kafkaç¯å¢ƒ**
   ```bash
   docker-compose up -d
   ```

2. **ç¼–è¯‘é¡¹ç›®**
   ```bash
   mvn clean compile
   ```

3. **å¯åŠ¨åº”ç”¨**
   ```bash
   # äº¤äº’å¼æ¨¡å¼ï¼ˆæ¨èæ–°æ‰‹ä½¿ç”¨ï¼‰
   mvn exec:java -Dexec.mainClass="com.example.kafka.ApplicationLauncher"
   
   # æˆ–ç›´æ¥è¿è¡Œ
   java -cp target/classes com.example.kafka.ApplicationLauncher
   ```

4. **è®¿é—®Kafka UI**
   - æ‰“å¼€æµè§ˆå™¨è®¿é—®: http://localhost:28081
   - æŸ¥çœ‹ä¸»é¢˜ã€æ¶ˆæ¯ã€æ¶ˆè´¹è€…ç»„ç­‰ä¿¡æ¯

### ğŸ“‹ ä½¿ç”¨æ­¥éª¤

1. é€‰æ‹©èœå•é€‰é¡¹ 1-6 æ¥è¿è¡Œä¸åŒçš„åŠŸèƒ½
2. è§‚å¯Ÿæ§åˆ¶å°è¾“å‡ºï¼Œäº†è§£Kafkaçš„å·¥ä½œåŸç†
3. åœ¨Kafka UIä¸­æŸ¥çœ‹æ¶ˆæ¯å’Œä¸»é¢˜ä¿¡æ¯
4. å°è¯•ä¸åŒçš„ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ç»„åˆ

## è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š
- é‚®ç®±: example@example.com
- GitHub: https://github.com/example/kafka-demo
- é¡¹ç›®æ–‡æ¡£: [docs/](docs/) ç›®å½•
